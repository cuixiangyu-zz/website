(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42f06783"],{1882:function(t,e,i){},"1c47":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r}));var s=i("b775");function a(t){return Object(s["a"])({url:"/viewHistory/addHistory",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/viewHistory/getHistory",method:"get",params:t})}},7057:function(t,e,i){"use strict";var s=i("1882"),a=i.n(s);a.a},"818f":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return n}));var s=i("b775");function a(t){return Object(s["a"])({url:"/video/getDetile",method:"get",params:t})}function r(t){return Object(s["a"])({url:"/video/changelevel",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/video/getWatchList",method:"get",params:t})}},bc50:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return n}));var s=i("b775");function a(t){return Object(s["a"])({url:"/userFavorite/addFavorite",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/userFavorite/deleteFavorite",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/userFavorite/getList",method:"get",params:t})}},f645:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("el-container",[i("el-header")],1),t._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:6,offset:6}},[i("el-card",[i("el-image",{attrs:{src:t.tableData.coverUrl,fit:"fill"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-row",{staticStyle:{bottom:"0px",top:"0px",right:"0px",left:"20px"}},[i("el-col",{attrs:{span:24}},[i("p",{staticStyle:{"font-size":"25px"}},[t._v(t._s(t.tableData.name))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getWatchList()}}},[t._v("播放列表")])],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"},[t._v("评分")]),t._v(" "),i("el-rate",{attrs:{colors:t.colors},on:{change:function(e){return t.changelevel(t.tableData)}},model:{value:t.level.level,callback:function(e){t.$set(t.level,"level",e)},expression:"level.level"}})],1),t._v(" "),i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"},[t._v("收藏")]),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加收藏",placement:"right"}},[null==t.tableData.userFavorite?i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-star-off"},on:{click:function(e){return t.addFavorite(t.tableData)}}}):t._e()],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消收藏",placement:"right"}},[null!==t.tableData.userFavorite?i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-star-on"},on:{click:function(e){return t.deleteFavorite(t.tableData)}}}):t._e()],1)],1)]),t._v(" "),i("el-col",{attrs:{span:24}},[i("p",{staticStyle:{"font-size":"17px",width:"20%"}},[t._v("作者")]),t._v(" "),t._l(t.tableData.actors,(function(e){return i("el-col",{key:e.id,staticClass:"row-li",attrs:{span:4},nativeOn:{click:function(e){return t.handleClick(e)}}},[i("el-tag",[t._v(t._s(t.tableData.chineseName))])],1)}))],2),t._v(" "),i("el-col",{attrs:{span:24}},[i("p",{staticStyle:{"font-size":"17px",width:"20%"}},[t._v("分类")]),t._v(" "),t._l(t.tableData.types,(function(e){return i("el-col",{key:e.id,staticClass:"row-li",attrs:{span:4},nativeOn:{click:function(e){return t.handleClick(e)}}},[i("el-tag",[t._v(t._s(t.tableData.chineseName))])],1)}))],2)],1)],1)],1),t._v(" "),i("el-row",{staticStyle:{width:"80%",left:"125px"}},t._l(t.tableData.address,(function(e){return i("el-col",{key:e,staticClass:"row-li",attrs:{span:4,offset:2},nativeOn:{click:function(e){return t.handleClick(e)}}},[i("el-image",{attrs:{src:e,"preview-src-list":t.tableData.address,fit:"fill"}})],1)})),1),t._v(" "),i("el-drawer",{attrs:{title:"播放列表!",visible:t.tableVisible,direction:"rtl",size:"50%"},on:{"update:visible":function(e){t.tableVisible=e}}},[i("el-table",{attrs:{data:t.pictureAndIdList.videoList,height:"800","row-class-name":t.tableRowClassName}},[i("el-table-column",{attrs:{property:"name",label:"影片名",width:"250"}}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型"}}),t._v(" "),i("el-table-column",{attrs:{prop:"actors",label:"作者"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.actors,(function(e){return i("div",[t._v(t._s(e.chineseName))])}))}}])}),t._v(" "),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:t.row.coverUrl,width:"90%",height:"90%",alt:"封面"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.selectPicture(e.$index,e.row)}}},[t._v("查看影片")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.deletePicture(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},a=[],r=(i("ac6a"),i("b775"));function n(t){return Object(r["a"])({url:"/picture/getDetil",method:"get",params:t})}var l=i("818f"),o=i("1c47"),c=i("bc50"),u={data:function(){return{tableData:[],queryId:null,editableTabsValue:"",listQuery:{pageNum:1,pageSize:10,actorName:null,pictureName:null,language:null,types:null},typeMap:"",actors:"",deviceDetail:null,imgSrc:"http://127.0.0.1:8081/website/resources/_MG_0138.jpg",url:"http://127.0.0.1:8081/website/resources/_MG_0138.jpg",srcList:[],level:{id:null,type:5,level:null},colors:["#99A9BF","#F7BA2A","#FF9900"],viewHistory:{type:5,videoId:null,startData:"",watchTime:""},addFavoriteParms:{type:5,videoId:null},pictureAndIdList:{idList:[],videoList:[]},tableVisible:!1}},created:function(){this.viewHistory.startData=Date.now();var t=sessionStorage.getItem("pictureAndIdList");null!==t&&void 0!==t&&""!==t&&(this.pictureAndIdList=JSON.parse(t)),this.getDetil()},beforeRouteLeave:function(t,e,i){sessionStorage.setItem("listQuery_comic_picture_detail",JSON.stringify(this.queryId)),sessionStorage.setItem("refresh_comic_picture_detail",!0),sessionStorage.setItem("pictureAndIdList",JSON.stringify(this.pictureAndIdList));var s=Date.now();this.viewHistory.watchTime=s-this.viewHistory.startData,this.viewHistory.startData=new Date(this.viewHistory.startData),this.saveViewHistory(),i()},methods:{getDetil:function(){var t=this,e=sessionStorage.getItem("listQuery_comic_picture_detail"),i=sessionStorage.getItem("refresh_comic_picture_detail");null!==e&&null!==i&&"true"===i&&(this.queryId=JSON.parse(e)),null!==this.$route.params.id&&void 0!==this.$route.params.id&&""!==this.$route.params.id&&(this.queryId=this.$route.params.id),this.viewHistory.videoId=this.queryId,this.pictureAndIdList.idList.unshift(this.queryId),n({id:this.queryId}).then((function(e){t.tableData=e}))},handleClick:function(){},getType:function(t){event.stopPropagation();var e=[],i=[];e.push("allTypes"),e.push(t.id),i.push(e),this.listQuery.types=i,this.listQuery.actorName=null,console.log(this.listQuery),sessionStorage.setItem("listQuery_comic_picture",JSON.stringify(this.listQuery)),sessionStorage.setItem("refresh_comic_picture",!0),this.getPageList()},getActor:function(t){event.stopPropagation(),this.listQuery.actorName=t,this.listQuery.types=null,sessionStorage.setItem("listQuery_comic_picture",JSON.stringify(this.listQuery)),sessionStorage.setItem("refresh_comic_picture",!0),this.getPageList()},imgview:function(){alert("2222")},jump:function(){alert("111")},showimg:function(){var t=[];t.push("http://127.0.0.1:8081/website/resources/_MG_0170.jpg"),t.push("http://127.0.0.1:8081/website/resources/_MG_0177.jpg"),this.srcList=t},saveViewHistory:function(){Object(o["a"])(this.viewHistory).then((function(t){}))},changelevel:function(t){this.level.id=t.id,Object(l["a"])(this.level)},addFavorite:function(t){var e=this;this.addFavoriteParms.videoId=t.id,Object(c["a"])(this.addFavoriteParms).then((function(t){e.tableData.userFavorite=t})).catch((function(t){e.getDetil()}))},deleteFavorite:function(t){var e=this;Object(c["b"])({id:this.tableData.userFavorite.id}).then((function(t){e.tableData.userFavorite=null})).catch((function(t){e.getDetil()}))},getWatchList:function(){var t=this;Object(l["c"])({idList:JSON.stringify(this.pictureAndIdList.idList)}).then((function(e){e.forEach((function(t){1===t.type?t.type="日本影片":2===t.type?t.type="美国影片":3===t.type?t.type="动漫":4===t.type?t.type="小视频":5===t.type&&(t.type="图片")})),t.pictureAndIdList.videoList=e,t.tableVisible=!0,console.log(t.pictureAndIdList)}))},deletePicture:function(t,e){for(var i=0;i<this.pictureAndIdList.idList.length;i++)e.id===this.pictureAndIdList.idList[i]&&(this.pictureAndIdList.idList.splice(i,1),i--);this.getWatchList()},selectPicture:function(t,e){var i=this,s=Date.now();this.viewHistory.watchTime=s-this.viewHistory.startData,this.viewHistory.startData=new Date(this.viewHistory.startData),this.saveViewHistory(),this.viewHistory.startData=Date.now(),this.tableVisible=!1,this.queryId=e.id,n({id:this.queryId}).then((function(t){i.tableData=t}))},tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.id===this.queryId?"success-row":""}}},d=u,p=(i("7057"),i("2877")),h=Object(p["a"])(d,s,a,!1,null,null,null);e["default"]=h.exports}}]);