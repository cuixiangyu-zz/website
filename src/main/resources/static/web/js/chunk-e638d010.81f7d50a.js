(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e638d010"],{"23ad":function(e,t,i){"use strict";var l=i("e230"),r=i.n(l);r.a},"2d38":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.tableData?i("div",{staticClass:"main"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"IP"}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入ip"},model:{value:e.listQuery.ip,callback:function(t){e.$set(e.listQuery,"ip",t)},expression:"listQuery.ip"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备类型"}},[i("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[i("el-option",{attrs:{label:"小屏",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"大屏",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"声音程序",value:"3"}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-right":"50px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.getAllDevice}},[e._v("查询")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleDeviceAdd}},[e._v("新增设备")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1),e._v(" "),i("el-form-item",{attrs:{label:"照片","label-width":"100px",prop:"imgUrl"}},[i("img",{staticStyle:{width:"60%",height:"60%"},attrs:{src:e.imgSrc}})])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.list,border:""}},[i("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ipAddress",label:"ip地址"}}),e._v(" "),i("el-table-column",{attrs:{prop:"bigScreenHeight",label:"设备高度"}}),e._v(" "),i("el-table-column",{attrs:{prop:"bigScreenWidth",label:"设备宽度"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"设备类型"}}),e._v(" "),i("el-table-column",{attrs:{prop:"address","min-width":"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleDeviceEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteDevice(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.getDetail(t.$index,t.row)}}},[e._v("详情")])]}}],null,!1,3031020799)})],1),e._v(" "),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{total:e.tableData.total,"current-page":e.listQuery.pageNum,"page-sizes":[1,5,10,20,30],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.formTitle,visible:e.deviceAddFormVisible,width:"30%"},on:{"update:visible":function(t){e.deviceAddFormVisible=t}}},[i("el-form",{ref:"deviceForm",attrs:{model:e.deviceAddForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"ip地址","label-width":"100px",prop:"ipAddress"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.deviceAddForm.ipAddress,callback:function(t){e.$set(e.deviceAddForm,"ipAddress",t)},expression:"deviceAddForm.ipAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备名称","label-width":"100px",prop:"name"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.deviceAddForm.name,callback:function(t){e.$set(e.deviceAddForm,"name",t)},expression:"deviceAddForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备类型","label-width":"100px"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.deviceAddForm.type,callback:function(t){e.$set(e.deviceAddForm,"type",t)},expression:"deviceAddForm.type"}},[i("el-option",{attrs:{label:"小屏",value:1}}),e._v(" "),i("el-option",{attrs:{label:"大屏",value:2}}),e._v(" "),i("el-option",{attrs:{label:"声音程序",value:3}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"设备高度","label-width":"100px"}},[i("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.deviceAddForm.bigScreenHeight,callback:function(t){e.$set(e.deviceAddForm,"bigScreenHeight",t)},expression:"deviceAddForm.bigScreenHeight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备宽度","label-width":"100px"}},[i("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.deviceAddForm.bigScreenWidth,callback:function(t){e.$set(e.deviceAddForm,"bigScreenWidth",t)},expression:"deviceAddForm.bigScreenWidth"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmForm}},[e._v("保 存")]),e._v(" "),i("el-button",{on:{click:function(t){e.deviceAddFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"诊室信息",visible:e.deviceDetailVisible,width:"30%"},on:{"update:visible":function(t){e.deviceDetailVisible=t}}},[e.deviceDetail?i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceDetail,height:"600",border:""}},[i("el-table-column",{attrs:{prop:"id",label:"id",fixed:"left"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sectionsId",label:"sectionsId"}}),e._v(" "),i("el-table-column",{attrs:{prop:"hisCode",label:"hisCode"}}),e._v(" "),i("el-table-column",{attrs:{prop:"clinicNo",label:"clinicNo"}}),e._v(" "),i("el-table-column",{attrs:{prop:"clinicName",label:"clinicName"}})],1)],1):e._e()])],1):e._e()},r=[],a=(i("7f7f"),i("ac6a"),i("b775"));function o(e){return Object(a["a"])({url:"/device/getAllDevice",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/device/add",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/device/delete",method:"post",params:e})}function c(e){return Object(a["a"])({url:"/device/getdetils",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/device/exportExcel",method:"post",params:e,responseType:"blob"})}var p={data:function(){return{tableData:[],listQuery:{pageNum:1,pageSize:10,ip:"",type:""},deviceAddFormVisible:!1,deviceAddForm:{id:"",ipAddress:"",name:"",type:null,remark:"",bigScreenHeight:"",bigScreenWidth:"",createTime:"",creater:""},rules:{ipAddress:[{required:!0,message:"请填写Ip地址",trigger:"blur"}],name:[{required:!0,message:"请填写设备名称",trigger:"blur"}]},formTitle:"",deviceDetailVisible:!1,deviceDetail:null,imgSrc:"http://127.0.0.1:8081/website/resources/_MG_0138.jpg"}},created:function(){},methods:{getAllDevice:function(){var e=this;o(this.listQuery).then((function(t){t.list.forEach((function(e){1===e.type&&(e.type="小屏"),2===e.type&&(e.type="大屏"),3===e.type&&(e.type="声音程序")})),e.tableData=t}))},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getAllDevice()},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getAllDevice()},deleteDevice:function(e,t){var i=this;this.$confirm("此操作将删除该设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n({id:t.id}).then((function(e){i.getAllDevice()}))}))},handleDeviceAdd:function(){for(var e in this.deviceAddForm)this.deviceAddForm[e]="";this.formTitle="新增设备",this.deviceAddFormVisible=!0},exportExcel:function(){s(this.defaultQuery).then((function(e){if(e){var t=window.URL.createObjectURL(new Blob([e]));console.log(e.fileNames);var i=document.createElement("a");i.style.display="none",i.href=t,i.setAttribute("download","设备信息.xlsx"),document.body.appendChild(i),i.click()}}))},confirmForm:function(){var e=this;this.$refs.deviceForm.validate((function(t){if(!t)return!1;"新增设备"===e.formTitle?d(e.deviceAddForm).then((function(t){e.deviceAddFormVisible=!1,e.getAllDevice()})):"编辑设备"===e.formTitle&&d(e.deviceAddForm).then((function(t){e.deviceAddFormVisible=!1,e.getAllDevice()}))}))},handleDeviceEdit:function(e,t){var i=t.id,l=t.ipAddress,r=t.name,a=t.bigScreenHeight,o=t.bigScreenWidth,d=t.type;this.deviceAddForm={id:i,ipAddress:l,name:r,bigScreenHeight:a,bigScreenWidth:o,type:d},"小屏"===this.deviceAddForm.type&&(this.deviceAddForm.type=1),"大屏"===this.deviceAddForm.type&&(this.deviceAddForm.type=2),"声音程序"===this.deviceAddForm.type&&(this.deviceAddForm.type=3),this.formTitle="编辑设备",this.deviceAddFormVisible=!0},getDetail:function(e,t){var i=this;c({id:t.id}).then((function(e){i.deviceDetail=e.clinicList,i.deviceDetailVisible=!0}))}}},u=p,m=(i("23ad"),i("2877")),v=Object(m["a"])(u,l,r,!1,null,"471dfe58",null);t["default"]=v.exports},e230:function(e,t,i){}}]);