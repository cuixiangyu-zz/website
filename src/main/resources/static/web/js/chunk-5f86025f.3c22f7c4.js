(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f86025f"],{2607:function(e,t,o){"use strict";var i=o("e150"),r=o.n(i);r.a},"6a2b":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.tableData?o("div",{staticClass:"main"},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"科室"}},[o("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.defaultQuery.sectionsId,callback:function(t){e.$set(e.defaultQuery,"sectionsId",t)},expression:"defaultQuery.sectionsId"}},e._l(e.options,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"医生姓名"}},[o("el-input",{attrs:{clearable:"",placeholder:""},model:{value:e.defaultQuery.name,callback:function(t){e.$set(e.defaultQuery,"name",t)},expression:"defaultQuery.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"HIS编码"}},[o("el-input",{attrs:{clearable:"",placeholder:""},model:{value:e.defaultQuery.hisId,callback:function(t){e.$set(e.defaultQuery,"hisId",t)},expression:"defaultQuery.hisId"}})],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-right":"50px"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.getDoctor}},[e._v("查询")])],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData.list}},[o("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"hisId",label:"HIS编码"}}),e._v(" "),o("el-table-column",{attrs:{prop:"sectionname",label:"签到科室"}}),e._v(" "),o("el-table-column",{attrs:{prop:"address","min-width":"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.editDoctor(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.findSectionByID(t.$index,t.row)}}},[e._v("所属科室")])]}}],null,!1,3793615419)})],1),e._v(" "),o("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{total:e.tableData.total,"current-page":e.defaultQuery.pageNum,"page-sizes":[1,5,10,20,30],"page-size":e.defaultQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),o("el-dialog",{attrs:{title:e.formTitle,visible:e.doctorAddFormVisible,width:"30%"},on:{"update:visible":function(t){e.doctorAddFormVisible=t}}},[o("el-form",{ref:"doctorForm",staticClass:"demo-ruleForm",attrs:{model:e.formQuery,rules:e.formRules}},["编辑医生"===e.formTitle?o("el-form-item",{attrs:{hidden:"true",label:"id","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.formQuery.id,callback:function(t){e.$set(e.formQuery,"id",t)},expression:"formQuery.id"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"医生姓名","label-width":"100px",prop:"name"}},[o("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.formQuery.name,callback:function(t){e.$set(e.formQuery,"name",t)},expression:"formQuery.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"用户名","label-width":"100px",prop:"userName"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.formQuery.userName,callback:function(t){e.$set(e.formQuery,"userName",t)},expression:"formQuery.userName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"HIS编码","label-width":"100px",prop:"hisId"}},[o("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.formQuery.hisId,callback:function(t){e.$set(e.formQuery,"hisId",t)},expression:"formQuery.hisId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"科室","label-width":"100px",prop:"sectionsId"}},[o("el-select",{attrs:{disabled:!0,filterable:"",placeholder:"请选择"},model:{value:e.formQuery.sectionsId,callback:function(t){e.$set(e.formQuery,"sectionsId",t)},expression:"formQuery.sectionsId"}},e._l(e.options,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"照片","label-width":"100px",prop:"imgUrl"}},[o("img",{staticStyle:{width:"60%",height:"60%"},attrs:{src:e.imgSrc}})]),e._v(" "),o("el-form-item",{attrs:{label:"上传","label-width":"100px"}},[o("el-upload",{attrs:{action:"doctor/upload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handSuccess},model:{value:e.formQuery.imgUrl,callback:function(t){e.$set(e.formQuery,"imgUrl",t)},expression:"formQuery.imgUrl"}},[o("i",{staticClass:"el-icon-plus"})]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl}})])],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",disabled:e.btnLoading},on:{click:e.confirmForm}},[e._v("保 存")]),e._v(" "),o("el-button",{on:{click:e.cancle}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"所属科室",visible:e.sectionVisible,width:"30%"},on:{"update:visible":function(t){e.sectionVisible=t}}},e._l(e.sectionsList,(function(t){return o("div",{key:t.id,staticClass:"sectionName"},[e._v(e._s(t.name))])})),0)],1):e._e()},r=[],a=(o("7f7f"),o("ac6a"),o("b775"));function l(e){return Object(a["a"])({url:"/doctor/findList",method:"post",params:e})}function n(e){return Object(a["a"])({url:"/doctor/update",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/doctor/exportExcel",method:"post",params:e,responseType:"blob"})}var c=o("b561"),u={data:function(){return{tableData:null,defaultQuery:{pageNum:1,pageSize:10,sectionsId:"",name:"",hisId:""},formRules:{userName:{required:!0,message:"请输入用户名！",trigger:"blur"}},doctorAddFormVisible:!1,formQuery:{id:"",name:"",userName:"",hisId:"",sectionsId:"",imgUrl:""},options:[],secitonsOption:"",btnLoading:!1,formTitle:"修改医生",dialogImageUrl:"",dialogVisible:!1,imgSrc:"",sectionVisible:!1,sectionsList:null}},created:function(){this.getSections()},mounted:function(){},methods:{getDoctor:function(){var e=this;l(this.defaultQuery).then((function(t){t.list.forEach((function(t){e.options.forEach((function(e){t.sectionsId===e.id&&(t.sectionname=e.name)}))})),e.tableData=t}))},getSections:function(){var e=this;Object(c["c"])().then((function(t){e.options=t,e.getDoctor()}))},handleSizeChange:function(e){this.defaultQuery.pageSize=e,this.getDoctor()},handleCurrentChange:function(e){this.defaultQuery.pageNum=e,this.getDoctor()},editDoctor:function(e,t){var o=t.id,i=t.name,r=t.userName,a=t.hisId,l=t.sectionsId,n=t.imgUrl;this.formQuery={id:o,name:i,userName:r,hisId:a,sectionsId:l,imgUrl:n},this.imgSrc="/doctor/getImg?imgUrl="+this.formQuery.imgUrl,this.doctorAddFormVisible=!0},exportExcel:function(){s(this.defaultQuery).then((function(e){if(e){var t=window.URL.createObjectURL(new Blob([e]));console.log(e.fileNames);var o=document.createElement("a");o.style.display="none",o.href=t,o.setAttribute("download","医生信息.xlsx"),document.body.appendChild(o),o.click()}}))},confirmForm:function(){var e=this;this.$refs.doctorForm.validate((function(t){if(!t)return!1;e.btnLoading=!0,n(e.formQuery).then((function(t){e.doctorAddFormVisible=!1,e.btnLoading=!1,e.getDoctor()})).catch((function(){e.btnLoading=!1}))}))},resetForm:function(){this.$refs.doctorForm.resetFields()},handleRemove:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handSuccess:function(e,t){this.formQuery.imgUrl=e.data},cancle:function(){this.resetForm(),this.doctorAddFormVisible=!1},findSectionByID:function(e,t){var o=this;this.sectionVisible=!0,console.log(t.id),Object(c["b"])({doctorId:t.id}).then((function(e){console.log(e),o.sectionsList=e}))}}},d=u,m=(o("2607"),o("2877")),f=Object(m["a"])(d,i,r,!1,null,"5933b40a",null);t["default"]=f.exports},b561:function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return a})),o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return n}));var i=o("b775");function r(e){return Object(i["a"])({url:"/sections/findList",method:"post",params:e})}function a(e){return Object(i["a"])({url:"/sections/findPage",method:"post",params:e})}function l(e){return Object(i["a"])({url:"/sections/findListByDoctorId",method:"post",params:e})}function n(e){return Object(i["a"])({url:"/sections/exportExcel",method:"post",params:e,responseType:"blob"})}},e150:function(e,t,o){}}]);