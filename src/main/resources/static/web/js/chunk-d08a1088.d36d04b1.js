(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d08a1088"],{"013e":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.tableData?i("div",{staticClass:"main"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"患者姓名"}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入患者姓名"},model:{value:e.defaltQuery.userName,callback:function(t){e.$set(e.defaltQuery,"userName",t)},expression:"defaltQuery.userName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"票号"}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入票号"},model:{value:e.defaltQuery.queueNo,callback:function(t){e.$set(e.defaltQuery,"queueNo",t)},expression:"defaltQuery.queueNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"科室"}},[i("el-select",{attrs:{placeholder:"请选择","value-key":"id"},model:{value:e.defaltQuery.sectionsId,callback:function(t){e.$set(e.defaltQuery,"sectionsId",t)},expression:"defaltQuery.sectionsId"}},e._l(e.sectionsList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"医生"}},[i("el-select",{attrs:{placeholder:"请选择","value-key":"id",clearable:""},model:{value:e.defaltQuery.doctor,callback:function(t){e.$set(e.defaltQuery,"doctor",t)},expression:"defaltQuery.doctor"}},e._l(e.doctorList,(function(e){return i("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.getNotCompleteList}},[e._v("查询")])],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-left":"50px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.batchEdit}},[e._v("批量转诊")])],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.list,border:""},on:{"selection-change":e.changeFun}},[i("el-table-column",{attrs:{type:"selection",prop:"checked",label:"批量转诊",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"患者姓名",align:"center",width:"150%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"120%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"就诊状态",align:"center",width:"120%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"queueNo",label:"票号",align:"center",width:"120%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"orderNo",label:"排队号",align:"center",width:"120%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sections.name",label:"科室名",align:"center",width:"150%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"doctor.name",label:"医生名",align:"center",width:"150%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"clinic.clinicName",label:"诊室名",align:"center",width:"150%"}}),e._v(" "),i("el-table-column",{attrs:{prop:"edit",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.insertQueue(t.$index,t.row)}}},[e._v("插队")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.changeClinicById(t.$index,t.row)}}},[e._v("转诊")])]}}],null,!1,1837450221)})],1),e._v(" "),i("el-dialog",{attrs:{title:"转诊",visible:e.changeClinicFormVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.changeClinicFormVisible=t}}},[i("el-form",{attrs:{model:e.changeClinic}},[i("el-form-item",{attrs:{label:"医生"}},[i("el-select",{attrs:{placeholder:"请选择","value-key":"id"},model:{value:e.changeClinic.doctor,callback:function(t){e.$set(e.changeClinic,"doctor",t)},expression:"changeClinic.doctor"}},e._l(e.changeClinicDoctorList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmEdit}},[e._v("保 存")]),e._v(" "),i("el-button",{on:{click:function(t){e.changeClinicFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"插队",visible:e.insertQueueFormVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.insertQueueFormVisible=t}}},[i("el-form",{ref:"insertForm",attrs:{model:e.insertQueueData,rules:e.rules}},[i("el-form-item",{attrs:{label:"插队票号",prop:"orderNo"}},[i("el-input",{attrs:{placeholder:"请输入票号",clearable:""},model:{value:e.insertQueueData.orderNo,callback:function(t){e.$set(e.insertQueueData,"orderNo",e._n(t))},expression:"insertQueueData.orderNo"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmInsert}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.insertQueueFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{total:e.tableData.total,"current-page":e.defaltQuery.pageNum,"page-sizes":[1,5,10,20,30],"page-size":e.defaltQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()},n=[],l=(i("ac4d"),i("8a81"),i("ac6a"),i("b775"));function r(e){return Object(l["a"])({url:"/nurse/notCompleteList",method:"post",params:e})}function o(e){return Object(l["a"])({url:"/nurse/batchEdit",method:"post",data:e})}function s(e){return Object(l["a"])({url:"/doctorCall/patientInsert",method:"post",params:e})}function c(e){return Object(l["a"])({url:"/nurse/getSignDoctor",method:"post",data:e})}var u={data:function(){return{name:"",sex:"",status:"",queueNo:"",orderNo:"",sectionName:"",doctorName:"",clinicName:"",checked:!0,checkBoxVisible:!0,changeClinicFormVisible:!1,insertQueueFormVisible:!1,defaltQuery:{pageNum:1,pageSize:10,sectionsId:"",userName:"",doctor:"",queueNo:""},changeClinic:{doctor:"",selectData:{}},insertQueueData:{orderNo:"",patientId:""},rules:{orderNo:[{required:!0,message:"请输入要插入的票号",trigger:"blur"},{type:"number",message:"票号必须为数字值"}]},doctorList:{},changeClinicDoctorList:{},sectionsList:{},tableData:null}},created:function(){this.getNotCompleteList()},methods:{getNotCompleteList:function(){var e=this;r(this.defaltQuery).then((function(t){var i=!0,a=!1,n=void 0;try{for(var l,r=t.pageInfos.list[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var o=l.value;0===o.sex?o.sex="男":o.sex="女",1===o.status?o.status="候诊":2===o.status?o.status="就诊":o.status="就诊完成"}}catch(s){a=!0,n=s}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}e.tableData=t.pageInfos,e.doctorList=t.allSignDoctorBySectionId,e.sectionsList=t.sections}))},handleSizeChange:function(e){this.defaltQuery.pageSize=e,this.getNotCompleteList()},handleCurrentChange:function(e){this.defaltQuery.pageNum=e,this.getNotCompleteList()},changeFun:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.changeClinic.selectData=t},batchEdit:function(){void 0===this.changeClinic.selectData||this.changeClinic.selectData.length<=0||void 0===this.changeClinic.selectData.length?alert("请选择转诊患者"):(this.getSignDoctor(),this.changeClinicFormVisible=!0)},confirmEdit:function(){var e=this;null!==this.changeClinic.selectData?o(this.changeClinic).then((function(t){e.changeClinicFormVisible=!1,e.getNotCompleteList()})):this.changeClinicFormVisible=!1},changeClinicById:function(e,t){var i=[];i.push(t.id),this.changeClinic.selectData=i,this.batchEdit()},insertQueue:function(e,t){this.insertQueueData.patientId=t.id,this.insertQueueFormVisible=!0},confirmInsert:function(){var e=this;this.$refs.insertForm.validate((function(t){if(!t)return!1;s(e.insertQueueData).then((function(t){e.insertQueueFormVisible=!1,e.getNotCompleteList()}))}))},getSignDoctor:function(){var e=this;this.changeClinic.doctor="",this.changeClinicDoctorList="",c(this.changeClinic).then((function(t){console.log(t),e.changeClinicDoctorList=t}))}}},d=u,h=(i("9a2b"),i("2877")),m=Object(h["a"])(d,a,n,!1,null,"18e76e1a",null);t["default"]=m.exports},"8b0d":function(e,t,i){},"9a2b":function(e,t,i){"use strict";var a=i("8b0d"),n=i.n(a);n.a}}]);